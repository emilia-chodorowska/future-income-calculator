<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Tytuł ustawiony statycznie dla robotów i przeglądarki -->
    <title>Kalkulator Przyszłych Dochodów | doTERRA</title>

    <!-- === META TAGI OPEN GRAPH Z TREŚCI WPISANĄ STATYCZNIE === -->
    <meta property="og:title" content="Kalkulator Przyszłych Dochodów | doTERRA">
    <meta property="og:description" content="Narzędzie do przewidywania przyszłych dochodów w strukturze doTERRA">
    <meta property="og:image" content="https://emilia-chodorowska.github.io/future-income-calculator/images/social-preview.png">
    <meta property="og:url" content="https://emilia-chodorowska.github.io/future-income-calculator/">
    <meta property="og:type" content="website">
    <meta name="twitter:card" content="summary_large_image">
    <!-- ======================================================================= -->

    <!-- Kolor paska adresu na urządzeniach mobilnych -->
    <meta name="theme-color" content="#ffffff">

    <!-- Dołączamy bibliotekę Tailwind CSS do stylizacji -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Dołączamy czcionkę z Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">

    <!-- === FAVICON === -->
    <link rel="icon" type="image/x-icon" href="favicon_io/favicon.ico">
    <link rel="icon" sizes="192x192" href="favicon_io/android-chrome-192x192.png">
    <link rel="icon" sizes="512x512" href="favicon_io/android-chrome-512x512.png">
    <link rel="apple-touch-icon" sizes="180x180" href="favicon_io/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="favicon_io/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="favicon_io/favicon-16x16.png">


    <style>
        /* Dodajemy niestandardową czcionkę do projektu */
        body {
            font-family: 'Montserrat', sans-serif;
            overflow-x: hidden; /* Zapobiega poziomemu przewijaniu */
        }

        /* Style dla inputów */
        input[type="number"] {
            border: 1px solid #d1d5db;
            border-radius: 0.375rem;
            padding: 0.5rem;
            width: 100%;
        }

        input[type="number"]:focus {
            outline: none;
            border-color: #3b82f6;
            ring: 2px;
            ring-color: #93c5fd;
        }

        input[type="checkbox"] {
            width: 1.25rem;
            height: 1.25rem;
            cursor: pointer;
        }

        /* Style dla drukowania PDF */
        @media print {
            body {
                background-color: white;
                padding: 0;
                margin: 0;
            }

            /* Ukryj liście w tle */
            img[src*="liscie"] {
                display: none !important;
            }

            /* Usuń cienie i efekty */
            .shadow-xl,
            .shadow-lg,
            .shadow {
                box-shadow: none !important;
            }

            /* Optymalizacja dla A4 */
            @page {
                size: A4;
                margin: 2cm;
            }

            /* Dostosuj kontenery */
            #main-container {
                max-width: 100%;
                padding: 0;
                margin: 0;
                box-shadow: none;
            }
        }
    </style>
</head>
<body class="bg-gray-50 flex items-center justify-center min-h-screen py-8">

    <!-- GŁÓWNY KONTENER STRONY -->
    <div id="main-container" class="relative container max-w-5xl my-8 p-12 sm:p-16 md:p-20 bg-white shadow-xl rounded-lg">

        <!-- GRAFIKI TŁA (LIŚCIE) -->
        <img
            src="images/liscie-gora.jpg"
            alt=""
            class="absolute top-0 left-0 w-1/3 opacity-30 pointer-events-none z-0"
            onerror="this.style.display='none'"
        >
        <img
            src="images/liscie-dol.jpg"
            alt=""
            class="absolute bottom-0 right-0 w-1/3 opacity-30 pointer-events-none z-0"
            onerror="this.style.display='none'"
        >

        <!-- LOGO DOTERRA EUROPE -->
        <img
            src="images/doterraeurope.png"
            alt="Logo doTERRA Europe"
            class="relative z-20 mx-auto mb-4 w-96 md:w-[28rem]"
            onerror="this.style.display='none'"
        >

        <!-- SEKCJA KALKULATOR -->
        <section id="sekcja-kalkulator" class="relative z-10 mt-6">
            <h2 class="text-2xl md:text-3xl font-semibold text-slate-800 mb-6 text-center leading-tight">Kalkulator Przyszłych Dochodów</h2>

            <div class="bg-white border border-gray-200 rounded-lg shadow p-6">
                <div class="space-y-4 text-slate-700">

                    <!-- Dane wejściowe -->
                    <div class="bg-blue-50 border-l-4 border-blue-400 rounded p-4">
                        <h3 class="text-lg font-bold text-slate-800 mb-4">Dane wejściowe</h3>

                        <div class="mb-4">
                            <label for="numMonths" class="block text-base font-semibold mb-2">
                                Liczba miesięcy do przewidzenia:
                            </label>
                            <input
                                type="number"
                                id="numMonths"
                                min="1"
                                value="12"
                                class="max-w-xs"
                            >
                        </div>

                        <div class="overflow-x-auto mt-4">
                            <table class="min-w-full bg-white border border-gray-200 rounded-lg text-sm">
                                <thead class="bg-blue-100">
                                    <tr>
                                        <th class="py-2 px-3 border-b text-left font-semibold text-slate-700">Miesiąc</th>
                                        <th class="py-2 px-3 border-b text-left font-semibold text-slate-700">Nowe osoby</th>
                                        <th class="py-2 px-3 border-b text-left font-semibold text-slate-700">PV z LRP</th>
                                        <th class="py-2 px-3 border-b text-center font-semibold text-slate-700">Moc Trzech</th>
                                    </tr>
                                </thead>
                                <tbody id="monthsTableBody" class="text-slate-700">
                                    <!-- Wiersze będą generowane dynamicznie przez JavaScript -->
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- Wyniki -->
                    <div id="resultsSection" class="space-y-4">
                        <!-- Przychody -->
                        <div class="bg-green-50 border-l-4 border-green-400 rounded p-4">
                            <h3 class="text-lg font-bold text-slate-800 mb-3">Przychody</h3>
                            <div class="space-y-2 text-base">
                                <div class="flex justify-between">
                                    <span>Przychody z nowych osób:</span>
                                    <span class="font-semibold" id="incomeNewPeople">0 zł</span>
                                </div>
                                <div class="flex justify-between">
                                    <span>Przychody z Fast Start (PV LRP):</span>
                                    <span class="font-semibold" id="incomeFastStart">0 zł</span>
                                </div>
                                <div class="flex justify-between">
                                    <span>Premie Moc Trzech:</span>
                                    <span class="font-semibold" id="incomePowerOfThree">0 zł</span>
                                </div>
                                <div class="flex justify-between border-t-2 border-green-300 pt-2 mt-2">
                                    <span class="font-bold">SUMA PRZYCHODÓW:</span>
                                    <span class="font-bold text-lg text-green-700" id="totalIncome">0 zł</span>
                                </div>
                            </div>
                        </div>

                        <!-- Koszty -->
                        <div class="bg-gray-50 border-l-4 border-gray-400 rounded p-4">
                            <h3 class="text-lg font-bold text-slate-800 mb-3">Koszty</h3>
                            <div class="space-y-2 text-base">
                                <div class="flex justify-between">
                                    <span>Koszty miesięczne (500 zł × <span id="monthsCount">0</span> miesięcy):</span>
                                    <span class="font-semibold" id="totalCosts">0 zł</span>
                                </div>
                            </div>
                        </div>

                        <!-- Zysk netto -->
                        <div class="bg-amber-50 border-l-4 border-amber-400 rounded p-4">
                            <h3 class="text-lg font-bold text-slate-800 mb-3">Podsumowanie</h3>
                            <div class="space-y-2 text-base">
                                <div class="flex justify-between">
                                    <span>Przychody:</span>
                                    <span class="font-semibold text-green-600" id="summaryIncome">0 zł</span>
                                </div>
                                <div class="flex justify-between">
                                    <span>Koszty:</span>
                                    <span class="font-semibold text-red-600" id="summaryCosts">0 zł</span>
                                </div>
                                <div class="flex justify-between border-t-2 border-amber-300 pt-2 mt-2">
                                    <span class="font-bold text-xl">ZYSK NETTO:</span>
                                    <span class="font-bold text-2xl" id="netProfit">0 zł</span>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </section>
    </div>

    <script>
        // Stałe
        const INCOME_PER_PERSON = 200;
        const INCOME_PER_100PV = 80;
        const POWER_OF_THREE_BONUS = 370;
        const MONTHLY_COSTS = 500;

        // Formatowanie kwoty w PLN
        function formatCurrency(amount) {
            return amount.toLocaleString('pl-PL') + ' zł';
        }

        // Generowanie wierszy tabeli dla miesięcy
        function updateMonthsTable() {
            const numMonths = parseInt(document.getElementById('numMonths').value) || 1;
            const tbody = document.getElementById('monthsTableBody');
            tbody.innerHTML = '';

            for (let i = 1; i <= numMonths; i++) {
                const row = document.createElement('tr');
                row.className = 'border-b hover:bg-blue-50';
                row.innerHTML = `
                    <td class="py-2 px-3">Miesiąc ${i}</td>
                    <td class="py-2 px-3">
                        <input type="number" min="0" value="0" class="month-input new-people" data-month="${i}">
                    </td>
                    <td class="py-2 px-3">
                        <input type="number" min="0" value="0" step="50" class="month-input pv-lrp" data-month="${i}">
                    </td>
                    <td class="py-2 px-3 text-center">
                        <input type="checkbox" class="month-input power-of-three" data-month="${i}">
                    </td>
                `;
                tbody.appendChild(row);
            }

            // Dodaj event listenery do nowych inputów
            document.querySelectorAll('.month-input').forEach(input => {
                input.addEventListener('input', calculateIncome);
                input.addEventListener('change', calculateIncome);
            });

            calculateIncome();
        }

        // Obliczanie dochodów
        function calculateIncome() {
            const numMonths = parseInt(document.getElementById('numMonths').value) || 1;

            let totalNewPeopleIncome = 0;
            let totalFastStartIncome = 0;
            let totalPowerOfThreeBonus = 0;

            // Zbierz dane z każdego miesiąca
            for (let i = 1; i <= numMonths; i++) {
                const newPeople = parseInt(document.querySelector(`.new-people[data-month="${i}"]`)?.value) || 0;
                const pvLrp = parseInt(document.querySelector(`.pv-lrp[data-month="${i}"]`)?.value) || 0;
                const powerOfThree = document.querySelector(`.power-of-three[data-month="${i}"]`)?.checked || false;

                totalNewPeopleIncome += newPeople * INCOME_PER_PERSON;
                totalFastStartIncome += Math.floor(pvLrp / 100) * INCOME_PER_100PV;
                if (powerOfThree) {
                    totalPowerOfThreeBonus += POWER_OF_THREE_BONUS;
                }
            }

            const totalIncome = totalNewPeopleIncome + totalFastStartIncome + totalPowerOfThreeBonus;
            const totalCosts = numMonths * MONTHLY_COSTS;
            const netProfit = totalIncome - totalCosts;

            // Aktualizuj wyświetlanie
            document.getElementById('incomeNewPeople').textContent = formatCurrency(totalNewPeopleIncome);
            document.getElementById('incomeFastStart').textContent = formatCurrency(totalFastStartIncome);
            document.getElementById('incomePowerOfThree').textContent = formatCurrency(totalPowerOfThreeBonus);
            document.getElementById('totalIncome').textContent = formatCurrency(totalIncome);

            document.getElementById('monthsCount').textContent = numMonths;
            document.getElementById('totalCosts').textContent = formatCurrency(totalCosts);

            document.getElementById('summaryIncome').textContent = formatCurrency(totalIncome);
            document.getElementById('summaryCosts').textContent = formatCurrency(totalCosts);

            const netProfitElement = document.getElementById('netProfit');
            netProfitElement.textContent = formatCurrency(netProfit);
            netProfitElement.className = 'font-bold text-2xl ' + (netProfit >= 0 ? 'text-green-600' : 'text-red-600');
        }

        // Inicjalizacja
        document.addEventListener('DOMContentLoaded', () => {
            const numMonthsInput = document.getElementById('numMonths');
            numMonthsInput.addEventListener('input', updateMonthsTable);

            updateMonthsTable();
        });
    </script>

</body>
</html>
